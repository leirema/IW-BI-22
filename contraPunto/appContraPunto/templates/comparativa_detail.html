{% extends "base.html"%}
{% block content %}
<section class="comparativa_detail">
    <section class="cabecera_comparativa">
    {% if comparativa.imagen %}
      <img alt="{{ comparativa.titulo }}" src="{{comparativa.imagen.url}}"  class="imagen_comparativa_detalle">
    {% endif %}
      <div class="info_comparativa">
      <div class="info_comparativa">
          <h1>{{ comparativa.titulo }}</h1>
          <p class="meta">
              <span>{{ comparativa.fecha }}</span> ·
              <span>Obj: {{ comparativa.objetividad|floatformat:1 }}</span>
          </p>
          <p class="categorias">
              {% for cat in comparativa.categoria.all %}
              <span class="badge" style="background-color: {{ cat.color }}">{{ cat.nombre }}</span>
              {% endfor %}
          </p>
          <article class="contenido_comparativa">
              <p>{{ comparativa.contenido|linebreaks }}</p>
          </article>
      </div>
  </section>
    <section class="noticia_table">
        <h2>Noticias asociadas</h2>
        <table class="tabla_comparativa">
            <thead>
                <tr>
                    <th>Medio</th>
                    <th>Titular</th>
                    <th>Resumen</th>
                    <th>Sesgo</th>
                </tr>
            </thead>
            <tbody>
                {% for noticia in noticias_relacionadas %}
                <tr>
                    <td class="medio">
                        {% if noticia.medio.logo %}
                        <img alt="{{ noticia.medio.nombre }}" src="{{noticia.medio.logo.url }}" class="logo_medio">
                        {% endif %}
                        <p>{{ noticia.medio.nombre }}</p>
                    </td>
                    <td class="titular">
                        <a href="{{ noticia.enlace }}" target="_blank">{{ noticia.titulo }}</a>
                    </td>
                    <td class="resumen">
                        {{ noticia.resumen|truncatewords:25 }}
                    </td>
                    <td class="sesgos">
                        <ul>
                            <li><strong>Ideológico:</strong> {{ noticia.get_sesgo_ideologico}} ({{ noticia.sesgo_ideologico|floatformat:1 }})</li>
                            <li><strong>Emocional:</strong> {{ noticia.get_sesgo_emocional }} ({{ noticia.sesgo_emocional|floatformat:1 }})</li>
                            <li><strong>Enfoque:</strong> {{ noticia.sesgo_enfoque.nombre }}</li>
                        </ul>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" class="sin-noticias">No hay noticias asociadas a esta comparativa.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
  </section>
</section>
{% endblock %}